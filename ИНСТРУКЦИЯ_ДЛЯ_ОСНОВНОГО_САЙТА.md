# üéÆ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –±–∞–ª–∞–Ω—Å–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ò–≥—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ iframe, –∏ –∏–∑-–∑–∞ CORS (–ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞) –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

**–û—à–∏–±–∫–∞:**
```
SecurityError: Blocked a frame with origin "https://chicken.valor-games.com" 
from accessing a cross-origin frame. Protocols, domains, and ports must match.
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–µ–º **postMessage API** - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É iframe –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –æ–∫–Ω–æ–º.

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1Ô∏è‚É£ –í –∏–≥—Ä–µ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ ‚úì)
–ò–≥—Ä–∞ —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É, –∫–æ–≥–¥–∞ –±–∞–ª–∞–Ω—Å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ª–∏–º–∏—Ç–∞.

### 2Ô∏è‚É£ –ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∞–π—Ç–µ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

**–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –Ω–∞ –≤–∞—à—É –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É** (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è iframe —Å –∏–≥—Ä–æ–π), –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º `</body>`:

```html
<script>
// –°–ª—É—à–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç iframe —Å –∏–≥—Ä–æ–π
window.addEventListener('message', function(event) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∏–≥—Ä–æ–≤–æ–π –¥–æ–º–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
    if (event.origin !== 'https://chicken.valor-games.com') {
        return; // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
    if (event.data && event.data.type === 'RELOAD_PAGE') {
        console.log('üéÆ –ë–∞–ª–∞–Ω—Å –¥–æ—Å—Ç–∏–≥ –ª–∏–º–∏—Ç–∞:', event.data);
        console.log('‚è∞ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É...');
        
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
        setTimeout(function() {
            window.location.reload();
        }, 1000);
    }
});

console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∏–≥—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
</script>
```

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ò–≥—Ä–æ–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ª–∏–º–∏—Ç–∞ –±–∞–ª–∞–Ω—Å–∞** (45M COP, 10K USD –∏–ª–∏ 70M PYG)
2. **–ò–≥—Ä–∞ –∂–¥—ë—Ç 2 —Å–µ–∫—É–Ω–¥—ã**
3. **–ò–≥—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ** —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É —á–µ—Ä–µ–∑ `postMessage`
4. **–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ**
5. **–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∂–¥—ë—Ç 1 —Å–µ–∫—É–Ω–¥—É** –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∏–≥—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`
4. –ö–æ–≥–¥–∞ –±–∞–ª–∞–Ω—Å –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –ª–∏–º–∏—Ç–∞, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è

---

## üìä –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–≥—Ä–∞:

```javascript
{
    type: 'RELOAD_PAGE',
    reason: 'balance_limit_reached',
    currency: 'COP',        // –∏–ª–∏ 'USD', 'PYG'
    balance: 45083999,      // —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
    limit: 45000000         // —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç
}
```

---

## üí° –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã:

- üá®üá¥ **–ö–æ–ª—É–º–±–∏—è (COP):** 45,000,000 –ø–µ—Å–æ
- üá™üá® **–≠–∫–≤–∞–¥–æ—Ä (USD):** $10,000
- üáµüáæ **–ü–∞—Ä–∞–≥–≤–∞–π (PYG):** 70,000,000 –≥—É–∞—Ä–∞–Ω–∏

---

## ‚öôÔ∏è –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª–∏–º–∏—Ç—ã:

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `res/js/game2.js` –∏ –Ω–∞–π–¥–∏—Ç–µ –º–µ—Ç–æ–¥ `checkBalanceLimit`:

```javascript
const balanceLimits = {
    'COP': 45000000,  // 45 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –ø–µ—Å–æ (–ö–æ–ª—É–º–±–∏—è)
    'USD': 10000,     // 10000$ (–≠–∫–≤–∞–¥–æ—Ä)
    'PYG': 70000000   // 70 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –≥—É–∞—Ä–∞–Ω–∏ (–ü–∞—Ä–∞–≥–≤–∞–π)
};
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

- ‚úì –†–∞–±–æ—Ç–∞–µ—Ç —Å CORS (—Ä–∞–∑–Ω—ã–µ –¥–æ–º–µ–Ω—ã)
- ‚úì –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úì –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úì –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úì –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `PARENT_PAGE_CODE.html` - –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.
