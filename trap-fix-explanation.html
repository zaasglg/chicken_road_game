<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trap Position Debug</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
        }
        h1 {
            text-align: center;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .explanation {
            background: rgba(52, 58, 64, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #ff6b6b;
        }
        .problem {
            background: rgba(220, 53, 69, 0.2);
            border-left-color: #dc3545;
        }
        .solution {
            background: rgba(40, 167, 69, 0.2);
            border-left-color: #28a745;
        }
        .code-block {
            background: #0d1117;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
        }
        .highlight-error {
            background: rgba(220, 53, 69, 0.3);
            padding: 2px 5px;
            border-radius: 3px;
        }
        .highlight-fix {
            background: rgba(40, 167, 69, 0.3);
            padding: 2px 5px;
            border-radius: 3px;
        }
        .visual-demo {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .demo-section {
            flex: 1;
            min-width: 300px;
            margin: 10px;
            background: rgba(52, 58, 64, 0.8);
            padding: 20px;
            border-radius: 10px;
        }
        .sector-row {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            align-items: flex-end;
        }
        .sector {
            flex: 1;
            height: 80px;
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            transition: all 0.3s;
        }
        .sector.trap {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            animation: flicker 1s infinite;
        }
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .sector.chicken {
            border: 3px solid #ffc107;
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
        }
        .sector.checked-wrong {
            border: 3px dashed #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }
        .sector-label {
            font-size: 11px;
            color: #aaa;
            margin-top: 5px;
        }
        .sector-coeff {
            font-weight: bold;
            font-size: 16px;
            color: #4ecca3;
        }
        .chicken-icon {
            position: absolute;
            top: -25px;
            font-size: 24px;
        }
        .fire-icon {
            position: absolute;
            top: -25px;
            font-size: 24px;
            animation: burn 0.5s infinite;
        }
        @keyframes burn {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.05);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid rgba(78, 204, 163, 0.3);
        }
        th {
            background: rgba(78, 204, 163, 0.2);
            color: #4ecca3;
            font-weight: bold;
        }
        .error-row {
            background: rgba(220, 53, 69, 0.2);
        }
        .success-row {
            background: rgba(40, 167, 69, 0.2);
        }
    </style>
</head>
<body>
    <h1>üêî –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–æ–≤—É—à–µ–∫ - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h1>
    
    <div class="explanation problem">
        <h2>‚ùå –ü—Ä–æ–±–ª–µ–º–∞</h2>
        <p><strong>–°–∏–º–ø—Ç–æ–º:</strong> –ö—É—Ä–∏—Ü–∞ —Å–≥–æ—Ä–∞–µ—Ç —Ä–∞–Ω—å—à–µ, —á–µ–º –¥–æ–ª–∂–Ω–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≤—É—à–∫–∞ –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ 1.12 (—Å–µ–∫—Ç–æ—Ä 3), –Ω–æ –∫—É—Ä–∏—Ü–∞ —Å–≥–æ—Ä–∞–µ—Ç –Ω–∞ 1.07 (—Å–µ–∫—Ç–æ—Ä 2).</p>
        
        <h3>–°—Ç–∞—Ä—ã–π –∫–æ–¥ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):</h3>
        <div class="code-block">
this.stp += 1;  // stp = 1 (–∫—É—Ä–∏—Ü–∞ –∏–¥—ë—Ç –Ω–∞ —Å–µ–∫—Ç–æ—Ä 1)<br>
var <span class="highlight-error">currentSectorId = this.stp + 1;</span>  // currentSectorId = 2 ‚ùå<br>
var $sector = $('.sector').eq(this.stp);  // –°–µ–∫—Ç–æ—Ä —Å –∏–Ω–¥–µ–∫—Å–æ–º 1<br>
var isFlameInArray = trapsArray.includes(currentSectorId);  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–∫—Ç–æ—Ä 2! ‚ùå
        </div>
        
        <h3>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:</h3>
        <table>
            <tr>
                <th>–®–∞–≥</th>
                <th>this.stp</th>
                <th>currentSectorId (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)</th>
                <th>–°–µ–∫—Ç–æ—Ä –∫—É—Ä–∏—Ü—ã</th>
                <th>–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–π —Å–µ–∫—Ç–æ—Ä</th>
                <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
            </tr>
            <tr class="error-row">
                <td>1</td>
                <td>1</td>
                <td>2</td>
                <td>–°–µ–∫—Ç–æ—Ä 1 (1.07x)</td>
                <td>–°–µ–∫—Ç–æ—Ä 2 (1.12x) ‚Üê –ª–æ–≤—É—à–∫–∞ –∑–¥–µ—Å—å</td>
                <td>‚ùå –ö—É—Ä–∏—Ü–∞ –Ω–∞ —Å–µ–∫—Ç–æ—Ä–µ 1, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–µ–∫—Ç–æ—Ä 2 - –°–†–ê–ë–ê–¢–´–í–ê–ï–¢ –õ–û–í–£–®–ö–ê!</td>
            </tr>
            <tr>
                <td>2</td>
                <td>2</td>
                <td>3</td>
                <td>–°–µ–∫—Ç–æ—Ä 2 (1.12x) ‚Üê –ª–æ–≤—É—à–∫–∞ –∑–¥–µ—Å—å</td>
                <td>–°–µ–∫—Ç–æ—Ä 3 (1.17x)</td>
                <td>–ö—É—Ä–∏—Ü–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –º–∏–º–æ –ª–æ–≤—É—à–∫–∏ (–µ—Å–ª–∏ –≤—ã–∂–∏–ª–∞)</td>
            </tr>
        </table>
    </div>
    
    <div class="visual-demo">
        <div class="demo-section">
            <h3 style="color: #ff6b6b;">‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (—Å—Ç–∞—Ä—ã–π –∫–æ–¥)</h3>
            <p style="font-size: 12px; color: #aaa;">–ö—É—Ä–∏—Ü–∞ –Ω–∞ —Å–µ–∫—Ç–æ—Ä–µ 1, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–µ–∫—Ç–æ—Ä 2</p>
            <div class="sector-row">
                <div class="sector">
                    <div class="sector-coeff">1.03x</div>
                    <div class="sector-label">Start</div>
                </div>
                <div class="sector chicken">
                    <span class="chicken-icon">üêî</span>
                    <div class="sector-coeff">1.07x</div>
                    <div class="sector-label">–°–µ–∫—Ç–æ—Ä 1<br>stp = 1</div>
                </div>
                <div class="sector trap checked-wrong">
                    <span class="fire-icon">üî•</span>
                    <div class="sector-coeff">1.12x</div>
                    <div class="sector-label">–°–µ–∫—Ç–æ—Ä 2<br>–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è!<br>–õ–û–í–£–®–ö–ê</div>
                </div>
                <div class="sector">
                    <div class="sector-coeff">1.17x</div>
                    <div class="sector-label">–°–µ–∫—Ç–æ—Ä 3</div>
                </div>
            </div>
            <p style="color: #ff6b6b; font-weight: bold;">–ö—É—Ä–∏—Ü–∞ —Å–≥–æ—Ä–∞–µ—Ç, —Ö–æ—Ç—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Å–µ–∫—Ç–æ—Ä–µ!</p>
        </div>
        
        <div class="demo-section">
            <h3 style="color: #28a745;">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–æ–≤—ã–π –∫–æ–¥)</h3>
            <p style="font-size: 12px; color: #aaa;">–ö—É—Ä–∏—Ü–∞ –Ω–∞ —Å–µ–∫—Ç–æ—Ä–µ 1, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–µ–∫—Ç–æ—Ä 1</p>
            <div class="sector-row">
                <div class="sector">
                    <div class="sector-coeff">1.03x</div>
                    <div class="sector-label">Start</div>
                </div>
                <div class="sector chicken">
                    <span class="chicken-icon">üêî</span>
                    <div class="sector-coeff">1.07x</div>
                    <div class="sector-label">–°–µ–∫—Ç–æ—Ä 1<br>stp = 1<br>–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è!</div>
                </div>
                <div class="sector trap">
                    <span class="fire-icon">üî•</span>
                    <div class="sector-coeff">1.12x</div>
                    <div class="sector-label">–°–µ–∫—Ç–æ—Ä 2<br>–õ–û–í–£–®–ö–ê</div>
                </div>
                <div class="sector">
                    <div class="sector-coeff">1.17x</div>
                    <div class="sector-label">–°–µ–∫—Ç–æ—Ä 3</div>
                </div>
            </div>
            <p style="color: #28a745; font-weight: bold;">–ö—É—Ä–∏—Ü–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞, –ª–æ–≤—É—à–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —Å–µ–∫—Ç–æ—Ä–µ!</p>
        </div>
    </div>
    
    <div class="explanation solution">
        <h2>‚úÖ –†–µ—à–µ–Ω–∏–µ</h2>
        <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç <code>data-id</code> –∏–∑ DOM —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞ –≤–º–µ—Å—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è ID.</p>
        
        <h3>–ù–æ–≤—ã–π –∫–æ–¥ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):</h3>
        <div class="code-block">
this.stp += 1;  // stp = 1 (–∫—É—Ä–∏—Ü–∞ –∏–¥—ë—Ç –Ω–∞ —Å–µ–∫—Ç–æ—Ä 1)<br>
var $sector = $('.sector').eq(this.stp);  // –ü–æ–ª—É—á–∞–µ–º DOM —ç–ª–µ–º–µ–Ω—Ç —Å–µ–∫—Ç–æ—Ä–∞<br>
var <span class="highlight-fix">sectorDataId = parseInt($sector.attr('data-id'));</span>  // –ß–∏—Ç–∞–µ–º ID –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ ‚úÖ<br>
var isFlameInArray = trapsArray.includes(sectorDataId);  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–∫—Ç–æ—Ä! ‚úÖ
        </div>
        
        <h3>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–µ–ø–µ—Ä—å:</h3>
        <table>
            <tr>
                <th>–®–∞–≥</th>
                <th>this.stp</th>
                <th>sectorDataId (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)</th>
                <th>–°–µ–∫—Ç–æ—Ä –∫—É—Ä–∏—Ü—ã</th>
                <th>–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–π —Å–µ–∫—Ç–æ—Ä</th>
                <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
            </tr>
            <tr class="success-row">
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>–°–µ–∫—Ç–æ—Ä 1 (1.07x)</td>
                <td>–°–µ–∫—Ç–æ—Ä 1 (1.07x)</td>
                <td>‚úÖ –ö—É—Ä–∏—Ü–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ–∫—Ç–æ—Ä–µ - –±–µ–∑–æ–ø–∞—Å–Ω–æ!</td>
            </tr>
            <tr class="error-row">
                <td>2</td>
                <td>2</td>
                <td>2</td>
                <td>–°–µ–∫—Ç–æ—Ä 2 (1.12x) ‚Üê –ª–æ–≤—É—à–∫–∞ –∑–¥–µ—Å—å</td>
                <td>–°–µ–∫—Ç–æ—Ä 2 (1.12x) ‚Üê –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è</td>
                <td>üî• –ö—É—Ä–∏—Ü–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–≥–æ—Ä–∞–µ—Ç –Ω–∞ –ª–æ–≤—É—à–∫–µ!</td>
            </tr>
        </table>
    </div>
    
    <div class="explanation">
        <h2>üìä –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏</h2>
        
        <h3>1. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å–µ–∫—Ç–æ—Ä–æ–≤:</h3>
        <ul>
            <li><strong>jQuery .eq():</strong> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 0-based –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é (0, 1, 2, 3...)</li>
            <li><strong>data-id –∞—Ç—Ä–∏–±—É—Ç:</strong> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 1-based ID (1, 2, 3, 4...)</li>
            <li><strong>trapsArray:</strong> —Å–æ–¥–µ—Ä–∂–∏—Ç 1-based ID —Å–µ–∫—Ç–æ—Ä–æ–≤ —Å –ª–æ–≤—É—à–∫–∞–º–∏</li>
        </ul>
        
        <h3>2. –ü—Ä–∏–º–µ—Ä –¥–ª—è Easy —É—Ä–æ–≤–Ω—è:</h3>
        <div class="code-block">
–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã: [1.03, 1.07, 1.12, 1.17, 1.23, 1.29, 1.36, 1.44, 1.53, 1.63]<br>
–ò–Ω–¥–µ–∫—Å—ã:       [0,    1,    2,    3,    4,    5,    6,    7,    8,    9   ]<br>
data-id:       [1,    2,    3,    4,    5,    6,    7,    8,    9,    10  ]<br>
<br>
–ï—Å–ª–∏ –ª–æ–≤—É—à–∫–∞ –Ω–∞ 1.12x:<br>
- –ò–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ: 2<br>
- data-id —Å–µ–∫—Ç–æ—Ä–∞: 3<br>
- trapsArray —Å–æ–¥–µ—Ä–∂–∏—Ç: [3]
        </div>
        
        <h3>3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:</h3>
        <ol>
            <li>–£–≤–µ–ª–∏—á–∏—Ç—å <code>this.stp</code> (–∫—É—Ä–∏—Ü–∞ –¥–µ–ª–∞–µ—Ç —à–∞–≥)</li>
            <li>–ü–æ–ª—É—á–∏—Ç—å —Å–µ–∫—Ç–æ—Ä —á–µ—Ä–µ–∑ <code>$('.sector').eq(this.stp)</code></li>
            <li>–ü—Ä–æ—á–∏—Ç–∞—Ç—å <code>data-id</code> –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞</li>
            <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —ç—Ç–æ—Ç <code>data-id</code> –≤ –º–∞—Å—Å–∏–≤–µ –ª–æ–≤—É—à–µ–∫</li>
        </ol>
    </div>
    
    <div class="explanation" style="background: rgba(78, 204, 163, 0.2); border-left-color: #4ecca3;">
        <h2>‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—Å–µ–Ω–æ</h2>
        <p>–§–∞–π–ª: <code>/res/js/game2.js</code></p>
        <p>–°—Ç—Ä–æ–∫–∏: ~1740-1777</p>
        <p><strong>–¢–µ–ø–µ—Ä—å –∫—É—Ä–∏—Ü–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≤—É—à–∫–∏ –∏ —Å–≥–æ—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–æ–º —Å–µ–∫—Ç–æ—Ä–µ, –≥–¥–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–æ–≤—É—à–∫–∞!</strong></p>
    </div>
</body>
</html>
